(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();let score=0,currentStreak=0,highestStreak=0,questionsAttempted=0,correctAnswers=0,currentQuestion={},timeRemaining=30,maxTime=60,timerInterval,timerStarted=!1,gameOver=!1,currentStage=1,stageThresholds=[0,20,50,80,140,250,400,680,970,1350,2e3],newButtonCooldown=!1,cooldownDuration=5,cooldownRemaining=0,cooldownInterval;const questionElement=document.getElementById("question"),answerInput=document.getElementById("answer"),submitBtn=document.getElementById("submit-btn"),newBtn=document.getElementById("new-btn"),scoreElement=document.getElementById("score"),streakElement=document.getElementById("streak"),feedbackElement=document.getElementById("feedback"),attemptedElement=document.getElementById("attempted"),correctElement=document.getElementById("correct"),accuracyElement=document.getElementById("accuracy"),highestStreakElement=document.getElementById("highest-streak");newBtn.addEventListener("click",()=>{gameOver?resetGame():newButtonCooldown||(startNewButtonCooldown(),generateQuestion())});function startNewButtonCooldown(){newButtonCooldown=!0,cooldownRemaining=cooldownDuration,newBtn.disabled=!0,newBtn.classList.add("opacity-50","cursor-not-allowed"),updateCooldownDisplay(),cooldownInterval=setInterval(()=>{cooldownRemaining--,updateCooldownDisplay(),cooldownRemaining<=0&&(clearInterval(cooldownInterval),newButtonCooldown=!1,newBtn.disabled=!1,newBtn.classList.remove("opacity-50","cursor-not-allowed"),newBtn.innerHTML='New Question <i class="fas fa-redo ml-2"></i>')},1e3)}function updateCooldownDisplay(){newBtn.innerHTML=`New Question (${cooldownRemaining}s) <i class="fas fa-hourglass-half ml-2"></i>`}function resetGame(){newButtonCooldown&&(clearInterval(cooldownInterval),newButtonCooldown=!1),score=0,currentStreak=0,highestStreak=0,questionsAttempted=0,correctAnswers=0,timeRemaining=30,timerStarted=!1,gameOver=!1,currentStage=1,scoreElement.textContent=score,streakElement.textContent=currentStreak,attemptedElement.textContent=questionsAttempted,correctElement.textContent=correctAnswers,accuracyElement.textContent="0%",highestStreakElement.textContent=highestStreak,document.getElementById("current-stage").textContent=currentStage,newBtn.innerHTML='New Question <i class="fas fa-redo ml-2"></i>',newBtn.classList.remove("bg-green-600","hover:bg-green-700","opacity-50","cursor-not-allowed"),newBtn.classList.add("bg-gray-600","hover:bg-gray-700"),newBtn.disabled=!1,answerInput.disabled=!1,submitBtn.disabled=!1,generateQuestion()}function checkStageProgression(){const o=currentStage;for(let e=stageThresholds.length-1;e>=0;e--)if(score>=stageThresholds[e]){currentStage=e+1;break}if(currentStage>o){const e=document.createElement("div");if(currentStage===11){document.body.classList.add("stage-11-active"),e.className="fixed top-10 left-1/2 transform -translate-x-1/2 bg-red-700 text-white px-8 py-4 rounded-lg shadow-xl z-50 animate-pulse text-lg font-bold",e.innerHTML="⚠️ IMPOSSIBLE MODE UNLOCKED ⚠️<br>Stage 11 Activated!";const n=document.querySelector(".container");n.classList.add("shake"),setTimeout(()=>n.classList.remove("shake"),1e3)}else e.className="fixed top-10 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-bounce",e.textContent=`Stage Up! Now at Stage ${currentStage}`;document.body.appendChild(e),document.getElementById("current-stage").textContent=currentStage,setTimeout(()=>{e.remove()},3e3)}}function generateQuestion(){if(!gameOver){switch(feedbackElement.textContent="",answerInput.value="",answerInput.focus(),checkStageProgression(),currentStage){case 1:generateStage1Question();break;case 2:generateStage2Question();break;case 3:generateStage3Question();break;case 4:generateStage4Question();break;case 5:generateStage5Question();break;case 6:generateStage6Question();break;case 7:generateStage7Question();break;case 8:generateStage8Question();break;case 9:generateStage9Question();break;case 10:generateStage10Question();break;case 11:generateStage11Question();break}timerStarted?(clearInterval(timerInterval),startTimer()):updateTimerDisplay()}}function generateStage1Question(){const operations=["+","-"],operation=operations[Math.floor(Math.random()*operations.length)];let num1,num2;operation==="+"?(num1=Math.floor(Math.random()*15)+1,num2=Math.floor(Math.random()*15)+1):(num1=Math.floor(Math.random()*15)+1,num2=Math.floor(Math.random()*num1)+1),currentQuestion={expression:`${num1} ${operation} ${num2}`,answer:eval(`${num1} ${operation} ${num2}`)},questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage2Question(){const operations=["+","-"],operation=operations[Math.floor(Math.random()*operations.length)];let num1,num2;operation==="+"?(num1=Math.floor(Math.random()*50)+10,num2=Math.floor(Math.random()*50)+10):(num1=Math.floor(Math.random()*25)+10,num2=Math.floor(Math.random()*num1)+1),currentQuestion={expression:`${num1} ${operation} ${num2}`,answer:eval(`${num1} ${operation} ${num2}`)},questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage3Question(){if(Math.random()<.6){const e=Math.floor(Math.random()*10)+2,n=Math.floor(Math.random()*10)+2;currentQuestion={expression:`${e} * ${n}`,answer:e*n}}else{const e=Math.floor(Math.random()*10)+2,n=Math.floor(Math.random()*10)+1;currentQuestion={expression:`${e*n} / ${e}`,answer:n}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage4Question(){const ops=["+","-"],op1=ops[Math.floor(Math.random()*ops.length)],op2=ops[Math.floor(Math.random()*ops.length)];let num1=Math.floor(Math.random()*15)+1,num2=Math.floor(Math.random()*15)+1,num3=Math.floor(Math.random()*15)+1;op1==="-"&&num2>num1&&([num1,num2]=[num2,num1]);let tempResult=eval(`${num1} ${op1} ${num2}`);if(op2==="-"&&num3>tempResult){const expression=`${num1} ${op1} ${num2} + ${num3}`;currentQuestion={expression,answer:eval(expression)}}else{const expression=`${num1} ${op1} ${num2} ${op2} ${num3}`;currentQuestion={expression,answer:eval(expression)}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage5Question(){const operations=["+","-","*"],questionType=Math.random();if(questionType<.5){const operation=operations[Math.floor(Math.random()*operations.length)];let num1,num2;operation==="+"||operation==="-"?(num1=Math.floor(Math.random()*20)+5,num2=Math.floor(Math.random()*20)+5,operation==="-"&&num2>num1&&([num1,num2]=[num2,num1])):(num1=Math.floor(Math.random()*19)+5,num2=Math.floor(Math.random()*19)+5),currentQuestion={expression:`${num1} ${operation} ${num2}`,answer:eval(`${num1} ${operation} ${num2}`)}}else{const num1=Math.floor(Math.random()*29)+9,num2=Math.floor(Math.random()*29)+9,num3=Math.floor(Math.random()*16)+6,expression=Math.random()<.5?`${num1} + ${num2} * ${num3}`:`${num1} * ${num2} + ${num3}`;currentQuestion={expression,answer:eval(expression)}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage6Question(){const operations=["+","-","*"],op1=operations[Math.floor(Math.random()*operations.length)],op2=operations[Math.floor(Math.random()*operations.length)],op3=operations[Math.floor(Math.random()*operations.length)];let num1=Math.floor(Math.random()*15)+5,num2=Math.floor(Math.random()*10)+2,num3=Math.floor(Math.random()*10)+2,num4=Math.floor(Math.random()*8)+2;op1==="-"&&num2>num1&&([num1,num2]=[num2,num1]);let expression=`${num1} ${op1} ${num2}`,tempResult=eval(expression);op2==="-"&&tempResult<num3?(expression=`${expression} + ${num3}`,tempResult=eval(expression)):(expression=`${expression} ${op2} ${num3}`,tempResult=eval(expression)),op3==="-"&&tempResult<num4?expression=`${expression} + ${num4}`:expression=`${expression} ${op3} ${num4}`,currentQuestion={expression,answer:eval(expression)},questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage7Question(){const operations=["+","-","*"],questionType=Math.random();if(questionType<.6){const op1=operations[Math.floor(Math.random()*operations.length)],op2=operations[Math.floor(Math.random()*operations.length)];let num1=Math.floor(Math.random()*15)+5,num2=Math.floor(Math.random()*10)+2,num3=Math.floor(Math.random()*10)+2;op1==="-"&&num2>num1&&([num1,num2]=[num2,num1]);let expression=`(${num1} ${op1} ${num2}) ${op2} ${num3}`,tempResult=eval(expression);tempResult<0&&(op2==="-"?expression=`(${num1} ${op1} ${num2}) + ${num3}`:op2==="*"&&(expression=`${num3} ${op2} (${num1} ${op1} ${num2})`)),currentQuestion={expression,answer:eval(expression)}}else{const op1=operations[Math.floor(Math.random()*operations.length)],op2=operations[Math.floor(Math.random()*operations.length)];let num1=Math.floor(Math.random()*10)+2,num2=Math.floor(Math.random()*12)+3,num3=Math.floor(Math.random()*10)+2;op1==="-"&&num2>num1&&([num1,num2]=[num2,num1]);let expression=`${num1} ${op2} (${num2} ${op1} ${num3})`;try{const result=eval(expression);result<0&&op2==="*"?expression=`(${num2} ${op1} ${num3}) ${op2} ${num1}`:result<0&&(expression=`${num1} + (${num2} ${op1} ${num3})`)}catch(o){expression=`${num1} + (${num2} + ${num3})`}currentQuestion={expression,answer:eval(expression)}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage8Question(){const o=Math.random();if(o<.4){const e=Math.floor(Math.random()*5)+2,n=Math.floor(Math.random()*2)+2;currentQuestion={expression:`${e}^${n}`,answer:Math.pow(e,n)}}else if(o<.7){const e=Math.floor(Math.random()*4)+2,n=2,r=Math.floor(Math.random()*15)+5;currentQuestion={expression:`${e}^${n} + ${r}`,answer:Math.pow(e,n)+r}}else{const e=Math.floor(Math.random()*5)+2,n=Math.floor(Math.random()*5)+2,r=e*n,t=Math.floor(Math.random()*10)+5;currentQuestion={expression:`${t} * (${r} / ${e})`,answer:t*n}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage9Question(){const questionType=Math.random();if(questionType<.5){const num1=Math.floor(Math.random()*8)+2,num2=Math.floor(Math.random()*6)+2,num3=Math.floor(Math.random()*5)+1,num4=Math.floor(Math.random()*5)+1,expression=`(${num1} * (${num2} + ${num3})) + ${num4}`;currentQuestion={expression,answer:eval(expression)}}else{const num1=Math.floor(Math.random()*8)+2,num2=Math.floor(Math.random()*6)+2,num3=Math.floor(Math.random()*5)+1,num4=Math.floor(Math.random()*5)+1,operations=["+","*"],operation=operations[Math.floor(Math.random()*operations.length)],expression=`(${num1} + ${num2}) ${operation} (${num3} + ${num4})`;currentQuestion={expression,answer:eval(expression)}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage10Question(){const questionType=Math.random();if(questionType<.33){const o=Math.floor(Math.random()*4)+2,e=Math.floor(Math.random()*2)+2,n=Math.floor(Math.random()*3)+2,r=2;currentQuestion={expression:`${o}^${e} + ${n}^${r}`,answer:Math.pow(o,e)+Math.pow(n,r)}}else if(questionType<.66){const o=Math.floor(Math.random()*3)+2,e=2,n=Math.floor(Math.random()*10)+5,r=Math.floor(Math.random()*5)+2;currentQuestion={expression:`${n} * (${o}^${e} + ${r})`,answer:n*(Math.pow(o,e)+r)}}else{const num1=Math.floor(Math.random()*8)+3,num2=Math.floor(Math.random()*5)+2,num3=Math.floor(Math.random()*4)+2,num4=Math.floor(Math.random()*3)+2,expression=`(${num1} * ${num2}) + (${num3} * ${num4})`;currentQuestion={expression,answer:eval(expression)}}questionElement.textContent=`${currentQuestion.expression} = ?`}function generateStage11Question(){const questionType=Math.random();if(questionType<.25){const o=Math.floor(Math.random()*15)+10,e=Math.floor(Math.random()*3)+2,n=Math.floor(Math.random()*7)+2,r=Math.floor(Math.random()*500)+100;let t=Math.pow(o,e)/n+r;if(t!==Math.floor(t)){t=Math.floor(t);const s=t-Math.floor(Math.pow(o,e)/n);currentQuestion={expression:`${o}^${e} / ${n} + ${s}`,answer:t}}else currentQuestion={expression:`${o}^${e} / ${n} + ${r}`,answer:t}}else if(questionType<.5){const num1=Math.floor(Math.random()*400)+600,num2=Math.floor(Math.random()*200)+400,num3=Math.floor(Math.random()*100)+200,num4=Math.floor(Math.random()*100)+100,expression=`${num1} - ${num2} + ${num3} - ${num4}`;currentQuestion={expression,answer:eval(expression)}}else if(questionType<.75){const o=Math.floor(Math.random()*8)+5,e=Math.floor(Math.random()*2)+2,n=Math.floor(Math.random()*6)+3,r=Math.floor(Math.random()*2)+2;let t=Math.floor(Math.random()*5)+2,s=(Math.pow(o,e)+Math.pow(n,r))/t;if(s!==Math.floor(s))for(let a=2;a<=10;a++){const i=(Math.pow(o,e)+Math.pow(n,r))/a;if(i===Math.floor(i)){t=a,s=i;break}}currentQuestion={expression:`(${o}^${e} + ${n}^${r}) / ${t}`,answer:s}}else{const o=Math.floor(Math.random()*10)+10,e=2,n=Math.floor(Math.random()*300)+600,r=Math.floor(Math.random()*300)+200,t=Math.floor(Math.random()*10)+5,s=`(${o}^${e} * ${t}) + ${n} - ${r}`,a=Math.pow(o,e)*t+n-r;currentQuestion={expression:s,answer:a}}questionElement.textContent=`${currentQuestion.expression} = ?`,questionElement.classList.add("text-red-600");const warningElement=document.createElement("div");warningElement.className="text-sm text-red-500 font-bold mt-2",warningElement.textContent="⚠️ IMPOSSIBLE LEVEL ⚠️",questionElement.appendChild(warningElement),questionElement.classList.add("animate-pulse"),setTimeout(()=>{questionElement.classList.remove("animate-pulse")},2e3)}function startTimer(){updateTimerDisplay(),timerInterval=setInterval(()=>{timeRemaining-=.1,timeRemaining<=0&&(timeRemaining=0,clearInterval(timerInterval),handleTimeUp()),updateTimerDisplay()},100)}function updateTimerDisplay(){const o=document.getElementById("time-display"),e=document.getElementById("timer-bar");o.textContent=`${Math.round(timeRemaining)}s`;const n=currentStage===11?Math.min(30,maxTime):maxTime,r=timeRemaining/n*100;e.style.width=`${r}%`,timeRemaining<10?(e.classList.remove("bg-purple-500","bg-yellow-500"),e.classList.add("bg-red-500")):timeRemaining<20?(e.classList.remove("bg-purple-500","bg-red-500"),e.classList.add("bg-yellow-500")):(e.classList.remove("bg-red-500","bg-yellow-500"),e.classList.add("bg-purple-500")),currentStage===11?e.classList.add("animate-pulse"):e.classList.remove("animate-pulse")}function handleTimeUp(){gameOver=!0,currentStreak=0,streakElement.textContent=currentStreak,newButtonCooldown&&(clearInterval(cooldownInterval),newButtonCooldown=!1),feedbackElement.textContent=`Time's up! The answer was ${currentQuestion.answer}`,feedbackElement.className="text-red-500 font-bold",answerInput.disabled=!0,submitBtn.disabled=!0,newBtn.innerHTML='Reset Game <i class="fas fa-sync-alt ml-2"></i>',newBtn.disabled=!1,newBtn.classList.remove("bg-gray-600","hover:bg-gray-700","opacity-50","cursor-not-allowed"),newBtn.classList.add("bg-green-600","hover:bg-green-700"),questionElement.textContent=`Game Over! Final Score: ${score} (Stage ${currentStage})`}function checkAnswer(){if(gameOver)return;const o=parseInt(answerInput.value);if(isNaN(o)){feedbackElement.textContent="Please enter a valid whole number!",feedbackElement.className="text-red-500 font-medium";return}questionsAttempted++,attemptedElement.textContent=questionsAttempted,clearInterval(timerInterval);let e=5;currentStage===11&&(e=50);const n=currentStage,r=Math.floor(currentStreak/3);if(o===currentQuestion.answer){let t=e*n+r;currentStage===11&&(t*=2),score+=t,currentStreak++,correctAnswers++,currentStreak>highestStreak&&(highestStreak=currentStreak,highestStreakElement.textContent=highestStreak);let s=Math.min(8,2+Math.floor(currentStage/2)+Math.floor(currentStreak/4));currentStage===11&&(s=Math.min(15,10+Math.floor(currentStreak/2))),timeRemaining=Math.min(maxTime,timeRemaining+s),currentStage===11?(feedbackElement.textContent=`INCREDIBLE! +${t} points, +${s}s 🔥🔥🔥`,feedbackElement.className="text-green-500 font-bold text-xl",questionElement.classList.add("correct-answer","animate-bounce")):(feedbackElement.textContent=`Correct! +${t} points, +${s}s 🎉`,feedbackElement.className="text-green-500 font-bold",questionElement.classList.add("correct-answer")),setTimeout(()=>{questionElement.classList.remove("correct-answer","animate-bounce")},800)}else{currentStreak=0;let t=3+Math.floor(currentStage*1.5);if(currentStage===11&&(t=15),timeRemaining=Math.max(0,timeRemaining-t),currentStage===11?(feedbackElement.textContent=`BRUTAL! -${t}s. The answer was ${currentQuestion.answer}`,feedbackElement.className="text-red-600 font-bold text-lg"):(feedbackElement.textContent=`Wrong! -${t}s. The answer was ${currentQuestion.answer}`,feedbackElement.className="text-red-500 font-medium"),questionElement.classList.add("wrong-answer"),setTimeout(()=>{questionElement.classList.remove("wrong-answer")},500),timeRemaining<=0){timeRemaining=0,updateTimerDisplay(),handleTimeUp();return}}scoreElement.textContent=score,streakElement.textContent=currentStreak,correctElement.textContent=correctAnswers,accuracyElement.textContent=Math.round(correctAnswers/questionsAttempted*100)+"%",updateTimerDisplay(),timerStarted&&timeRemaining>0&&!gameOver&&startTimer(),setTimeout(()=>{if(!gameOver){questionElement.classList.remove("text-red-600");const t=questionElement.querySelector("div");t&&t.remove(),generateQuestion()}},1800)}document.addEventListener("DOMContentLoaded",()=>{generateQuestion(),submitBtn.addEventListener("click",()=>{gameOver||(timerStarted||(startTimer(),timerStarted=!0),checkAnswer())}),newBtn.addEventListener("click",()=>{gameOver?resetGame():generateQuestion()}),answerInput.addEventListener("keypress",o=>{o.key==="Enter"&&!gameOver&&(timerStarted||(startTimer(),timerStarted=!0),checkAnswer())})});
